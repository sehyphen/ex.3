<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= movie.title %> - Rancid Tomatoes</title>
    <link href="/movie.css" type="text/css" rel="stylesheet">
    <link href="/images/rotten.gif" type="image/gif" rel="shortcut icon" />
</head>
<body>
    <div class="banner">
        <img src="/images/banner.png" alt="Rancid Tomatoes" />
    </div>
    <h1><%= movie.title %> (<%= movie.year %>)</h1>

    <div class="container">
        <div class="rating-section">
            <div class="rating">
                <img src="/images/<%= movie.rating >= 60 ? 'freshbig.png' : 'rottenbig.png' %>" alt="Rating" />
                <span><%= movie.rating %>%</span>
            </div>
        </div>

        <div class="content">
            <div class="left">
                <div class="reviews-section">
                    <% movie.reviews.forEach((review) => { %>
                        <div class="review">
                            <div class="review-content">
                                <img src="/images/<%= review.fresh ? 'fresh.gif' : 'rotten.gif' %>" alt="Review" />
                                <q><%= review.text %></q>
                            </div>
                            <div class="review-details">
                                <img src="/images/critic.gif" alt="Critic" />
                                <p><%= review.critic %> <br /> <%= review.publication %></p>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>

            <div class="right">
                <div>
                    <img src="/posters/<%= movie.poster %>" alt="Movie Poster">
                </div>
                <div class="movie-info">
                    <dl>
                        <dt>Starring</dt>
                        <dd><%= movie.starring.join('<br>') %></dd>
                        <dt>Director</dt>
                        <dd><%= movie.director %></dd>
                        <dt>Rating</dt>
                        <dd><%= movie.mpaa_rating %></dd>
                        <dt>Theatrical Release</dt>
                        <dd><%= movie.release_date %></dd>
                        <dt>Movie Synopsis</dt>
                        <dd><%= movie.synopsis %></dd>
                        <dt>Runtime</dt>
                        <dd><%= movie.runtime %> mins</dd>
                        <dt>Genre</dt>
                        <dd><%= movie.genre.join(', ') %></dd>
                        <dt>Box Office</dt>
                        <dd>$<%= movie.box_office %> million</dd>
                        <dt>Links</dt>
                        <dd>
                            <ul>
                                <% movie.links.forEach(link => { %>
                                    <li><a href="<%= link.url %>" target="_blank"><%= link.text %></a></li>
                                <% }); %>
                            </ul>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>

        <div class="footer">
            (1-<%= movie.reviews.length %> of <%= movie.reviews.length %>)
        </div>
    </div>
</body>
</html>
