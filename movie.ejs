<!-- views/movie.ejs -->
<!DOCTYPE html>
<html>
<head>
    <title>Rancid Tomatoes - <%= movie ? movie.title : 'Error' %></title>
    <link rel="stylesheet" href="/movie.css">
</head>
<body>
    <% if (!movie) { %>
        <h1>Error: Missing movie title parameter</h1>
        <p>Please provide a valid movie title in the URL query parameter.</p>
    <% } else { %>
        <header>
            <img src="<%= movie.poster %>" alt="<%= movie.title %> Poster">
            <h1><%= movie.title %> (<%= movie.year %>)</h1>
            <img src="/<%= movie.rating >= 60 ? 'freshbig.png' : 'rottenbig.png' %>" alt="Rating">
        </header>

        <div class="reviews">
            <% movie.reviews.forEach((review, index) => { %>
                <div class="review-column <%= index % 2 === 0 ? 'left' : 'right' %>">
                    <img src="/<%= review.rating >= 60 ? 'fresh.gif' : 'rotten.gif' %>" alt="Review">
                    <p><%= review.quote %></p>
                    <p>- <%= review.reviewer %></p>
                </div>
            <% }) %>
        </div>
        
        <footer>
            <p>(1-<%= movie.reviews.length %>) of <%= movie.reviews.length %></p>
        </footer>
    <% } %>
</body>
</html>